# Basic Apache Configuration for Mautic
# Essential performance optimizations only - no custom plugins or themes
# This configuration extends the default Apache setup with minimal changes

# Enable mod_rewrite for Mautic URL rewriting (required for Mautic)
LoadModule rewrite_module modules/mod_rewrite.so

# Basic security headers (essential security measures)
Header always set X-Content-Type-Options nosniff
Header always set X-Frame-Options DENY
Header always set X-XSS-Protection "1; mode=block"
Header always set Referrer-Policy "strict-origin-when-cross-origin"

# Performance optimizations (essential only)
# Enable compression for better performance
LoadModule deflate_module modules/mod_deflate.so
<Location />
    SetOutputFilter DEFLATE
    # Exclude binary files from compression
    SetEnvIfNoCase Request_URI \
        \.(?:gif|jpe?g|png)$ no-gzip dont-vary
    SetEnvIfNoCase Request_URI \
        \.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary
</Location>

# Cache static assets for better performance
<LocationMatch "\.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2)$">
    ExpiresActive On
    ExpiresDefault "access plus 1 month"
    Header append Cache-Control "public, immutable"
</LocationMatch>

# Security: Disable server signature and version info
ServerTokens Prod
ServerSignature Off

# Mautic-specific configurations
# Allow .htaccess overrides for Mautic routing
<Directory "/var/www/html">
    AllowOverride All
    Require all granted
</Directory>